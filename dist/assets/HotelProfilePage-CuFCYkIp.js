import{j as e,A as _,B as i,P as A,g as h,X as C,s as b}from"./ui-components-CL-10tNC.js";import{f as R,u as P,r as l}from"./react-vendor-NfsKhbMh.js";import{B}from"./BottomNavigation-BMDl6fTq.js";import{g as H,o as p}from"./telegram-BI51GiG9.js";import"./supabase-DQ7Oc2S5.js";const q=()=>{const{username:o}=R(),n=P(),[a,u]=l.useState(null),[c,f]=l.useState([]),[j,d]=l.useState(!0),[t,m]=l.useState(null);l.useEffect(()=>{(async()=>{try{d(!0);const{data:r,error:x}=await b.from("hotels").select("*").eq("username",o).eq("is_active",!0).eq("approval_status","approved").maybeSingle();if(x)throw x;if(!r){n("/hotels");return}u(r);const{data:w,error:g}=await b.from("hotel_rooms").select("*").eq("hotel_id",r.id).order("floor_number").order("room_number");if(g)throw g;f(w||[])}catch(r){console.error("Error fetching hotel:",r)}finally{d(!1)}})()},[o,n]);const y=s=>{s.availability_status==="available"&&m(s)},N=s=>{if(a){const r=H(a.name,s.room_number,s.room_type);p(a.telegram_contact,r)}},v=()=>{a!=null&&a.phone_number&&(window.location.href=`tel:${a.phone_number}`)},k=()=>{a&&p(a.telegram_contact,`Hello! I'm interested in booking a room at ${a.name}.`)};return j?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0A0A0A]",children:e.jsx("div",{className:"w-12 h-12 border-3 border-[#00D9FF]/30 border-t-[#00D9FF] rounded-full animate-spin"})}):a?e.jsxs("div",{className:"min-h-screen bg-[#0A0A0A] pb-20",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#1A1A1A] to-[#0A0A0A] shadow-lg border-b border-[#2A2A2A]",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[e.jsxs("button",{onClick:()=>n("/hotels"),className:"flex items-center gap-2 px-4 py-2 bg-[#2A2A2A] hover:bg-[#3A3A3A] text-white rounded-xl transition-all btn-animate mb-4",children:[e.jsx(_,{className:"h-5 w-5"}),"Back to Hotels"]}),e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:a.logo_url?e.jsx("img",{src:a.logo_url,alt:a.name,className:"w-24 h-24 rounded-lg object-cover"}):e.jsx("div",{className:"w-24 h-24 rounded-lg bg-gradient-to-br from-green-100 to-blue-100 dark:from-green-900 dark:to-blue-900 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-300",children:a.name.substring(0,2).toUpperCase()})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:a.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:a.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),a.location]}),e.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded",children:a.category})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[a.phone_number&&e.jsxs(i,{onClick:v,variant:"secondary",className:"flex-1",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Call"]}),e.jsxs(i,{onClick:k,variant:"primary",className:"flex-1",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Contact"]})]})]})}),a.channel_url&&e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:e.jsx("iframe",{src:a.channel_url,className:"w-full h-96",title:`${a.name} Channel`})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Available Rooms"}),c.length===0?e.jsx("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No rooms available"})}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-3",children:c.map(s=>e.jsxs("button",{onClick:()=>y(s),disabled:s.availability_status==="booked",className:`relative p-4 rounded-lg text-center transition-all ${s.availability_status==="available"?"bg-green-100 dark:bg-green-900 hover:bg-green-200 dark:hover:bg-green-800 cursor-pointer":"bg-gray-200 dark:bg-gray-700 cursor-not-allowed opacity-60"}`,children:[s.room_type==="VIP"&&e.jsx("span",{className:"absolute top-1 right-1 bg-yellow-400 text-yellow-900 text-xs px-1.5 py-0.5 rounded font-semibold",children:"VIP"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:s.room_number}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:["Floor ",s.floor_number]}),e.jsx("div",{className:"text-xs font-medium mt-1",children:s.availability_status==="available"?e.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Available"}):e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Booked"})})]},s.id))})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Room ",t.room_number]}),e.jsx("button",{onClick:()=>m(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(C,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Room Type:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:t.room_type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Floor:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:t.floor_number})]}),t.price_per_night&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Price per night:"}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["$",t.price_per_night]})]}),t.amenities&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300 block mb-1",children:"Amenities:"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:t.amenities})]})]}),t.room_images&&t.room_images.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Images:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.room_images.map((s,r)=>e.jsx("img",{src:s,alt:`Room ${t.room_number} - ${r+1}`,className:"w-full h-32 object-cover rounded-lg"},r))})]}),e.jsxs(i,{onClick:()=>N(t),variant:"primary",className:"w-full",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Check In via Telegram"]})]})}),e.jsx(B,{})]}):null};export{q as default};
