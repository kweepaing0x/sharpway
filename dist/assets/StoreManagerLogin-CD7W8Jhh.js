import{j as e,d as b,D as u,U as j,ad as y,B as v}from"./ui-components-CL-10tNC.js";import{r as n,N as w}from"./react-vendor-NfsKhbMh.js";import{b as N}from"./index-DNL726t5.js";import"./supabase-DQ7Oc2S5.js";const D=()=>{const{login:m,manager:x,loading:l}=N(),[r,p]=n.useState({username:"",password:""}),[i,o]=n.useState(!1),[d,s]=n.useState(null);if(x&&!l)return e.jsx(w,{to:"/store-manager",replace:!0});const c=a=>{const{name:t,value:g}=a.target;p(f=>({...f,[t]:g})),s(null)},h=async a=>{a.preventDefault(),o(!0),s(null);try{await m(r.username,r.password)||s("Invalid username or password")}catch{s("Login failed. Please try again.")}finally{o(!1)}};return l?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:e.jsx(b,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Store Manager Login"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to manage your store"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:h,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{label:"Username",name:"username",type:"text",value:r.username,onChange:c,required:!0,fullWidth:!0,icon:e.jsx(j,{className:"h-5 w-5 text-gray-400"}),placeholder:"Enter your username"}),e.jsx(u,{label:"Password",name:"password",type:"password",value:r.password,onChange:c,required:!0,fullWidth:!0,icon:e.jsx(y,{className:"h-5 w-5 text-gray-400"}),placeholder:"Enter your password"})]}),d&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",children:d}),e.jsx("div",{children:e.jsx(v,{type:"submit",variant:"primary",fullWidth:!0,disabled:i||!r.username||!r.password,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Need help?"," ",e.jsx("a",{href:"https://t.me/dx0dev",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Contact your administrator"})]})})]})]})})};export{D as default};
