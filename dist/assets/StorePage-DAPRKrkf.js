import{j as e,X as Ae,I as R,m as $e,s as I,B as g,n as De,o as Fe,M as qe,p as Ve,P as He,q as Oe,G as We,L as Ue,r as xe,t as Qe,C as Be,a as Re}from"./ui-components-CL-10tNC.js";import{r as a,R as Ze,f as Ye}from"./react-vendor-NfsKhbMh.js";import{a as Ge,i as ue,f as fe}from"./stores-BBDuH2RS.js";import{M as Xe,C as Je}from"./MainHeader-Bm5d1zUE.js";import{P as Z}from"./PriceDisplay-BLSyXYBn.js";import{P as Ke}from"./PopUpAdDisplay-DBbJDXcm.js";import"./supabase-DQ7Oc2S5.js";import"./index-DNL726t5.js";const es=({imageUrl:l,isOpen:t,onClose:x})=>{const[c,p]=a.useState(!1);a.useEffect(()=>{const d=b=>{b.key==="Escape"&&x()};return t?(document.addEventListener("keydown",d),document.body.style.overflow="hidden"):(document.removeEventListener("keydown",d),document.body.style.overflow="unset"),()=>{document.removeEventListener("keydown",d),document.body.style.overflow="unset"}},[t,x]);const j=d=>{d.stopPropagation(),p(!c)};return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",onClick:x,children:[e.jsx("button",{className:"absolute top-4 right-4 text-white text-2xl p-2 rounded-full bg-gray-800 bg-opacity-50 hover:bg-opacity-75 transition-all",onClick:x,"aria-label":"Close image",children:e.jsx(Ae,{size:24})}),e.jsx("img",{src:l,alt:"Full size product",className:`max-w-[90vw] max-h-[90vh] object-contain image-zoomable ${c?"zoomed":""}`,onClick:j})]}):null},ss=Ze.memo(({product:l,onAddToCart:t,onQuickView:x,isLoading:c,recentlyAdded:p,productCategories:j})=>{var b;const d=((b=j.find(C=>C.id===l.category))==null?void 0:b.name)||l.category;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-300 hover:shadow-md hover:-translate-y-1 group w-full aspect-[3/4] max-w-[200px] mx-auto",children:[e.jsxs("div",{className:"aspect-square relative cursor-pointer bg-stone-100",onClick:()=>x(l),children:[l.image_url?e.jsx("img",{src:l.image_url,alt:l.name,className:"w-full h-full object-cover",loading:"lazy",decoding:"async"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(R,{className:"w-8 h-8 text-stone-400"})}),e.jsx("span",{className:"absolute top-2 left-2 bg-black/70 text-white text-xs font-semibold px-2 py-1 rounded-full backdrop-blur-sm",children:d})]}),e.jsxs("div",{className:"p-3 flex-1 flex flex-col justify-between min-h-0",children:[e.jsxs("div",{className:"flex-1 min-h-0",children:[e.jsx("h3",{className:"font-medium text-sm text-stone-900 line-clamp-2 leading-tight mb-1",children:l.name}),e.jsx("p",{className:"text-xs text-stone-600 line-clamp-2 leading-relaxed",children:l.description})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-2",children:[e.jsx(Z,{amount:l.price,className:"text-sm font-semibold"}),e.jsx("button",{onClick:()=>t(l),disabled:c&&p===l.id,"aria-label":`Add ${l.name} to cart`,className:"w-8 h-8 rounded-full bg-indigo-600 text-white flex items-center justify-center disabled:opacity-50 transition-opacity",children:c&&p===l.id?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx($e,{className:"w-4 h-4"})})]})]})]})}),ds=()=>{var he;const{storeUsername:l}=Ye(),[t,x]=a.useState(null),[c,p]=a.useState([]),[j,d]=a.useState(!0),[b,C]=a.useState(!1),[Y,E]=a.useState(null),[z,G]=a.useState(""),[T,ge]=a.useState(""),[S,X]=a.useState(""),[M,J]=a.useState("name-asc"),[A,K]=a.useState("grid"),[pe,be]=a.useState(!1),[_,we]=a.useState([]),[u,P]=a.useState(1),[$,je]=a.useState(20),[D,ee]=a.useState(null),[w,ye]=a.useState([]),[ve,se]=a.useState(!1),[te,Ne]=a.useState(!1),[o,y]=a.useState(null),[F,q]=a.useState(null),[L,V]=a.useState({show:!1,message:""}),[ae,ke]=a.useState(!1),[Ce,H]=a.useState(!0),[O,Se]=a.useState(0),{addItem:re,isLoading:v,recentlyAdded:N,getItemCount:_e}=Ge();_e();const m=a.useMemo(()=>{let s=c.filter(n=>{var k;const i=n.name.toLowerCase().includes(T.toLowerCase())||((k=n.description)==null?void 0:k.toLowerCase().includes(T.toLowerCase())),h=!S||n.category===S;return i&&h});const r={"name-asc":(n,i)=>n.name.localeCompare(i.name),"name-desc":(n,i)=>i.name.localeCompare(n.name),"price-asc":(n,i)=>n.price-i.price,"price-desc":(n,i)=>i.price-n.price,newest:(n,i)=>new Date(i.created_at).getTime()-new Date(n.created_at).getTime()}[M];return r?s.sort(r):s},[c,T,S,M]);a.useEffect(()=>{const s=()=>{const r=window.innerWidth<768;ke(r),je(r?20:16)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),a.useEffect(()=>{if(!ae){H(!0);return}const s=()=>{const r=window.scrollY;r>O&&r>100?H(!1):r<O&&H(!0),Se(r)};return window.addEventListener("scroll",s,{passive:!0}),()=>window.removeEventListener("scroll",s)},[ae,O]),a.useEffect(()=>{const s=setTimeout(()=>{ge(z),P(1)},300);return()=>clearTimeout(s)},[z]),a.useEffect(()=>{if(L.show){const s=setTimeout(()=>{V({show:!1,message:""})},2e3);return()=>clearTimeout(s)}},[L.show]);const ne=a.useCallback(async()=>{se(!0);try{const{data:s,error:r}=await I.from("product_categories").select("*").eq("is_active",!0).order("name");if(r)throw r;ye(s||[])}catch(s){console.error("Error fetching product categories:",s)}finally{se(!1)}},[]),W=a.useCallback(async s=>{try{d(!0),E(null);const{data:r,error:n}=await I.from("stores").select("*").eq("username",s).eq("is_active",!0).eq("approval_status","approved").maybeSingle();if(n)throw n;if(!r){E("Store not found or not available"),x(null),d(!1);return}x(r);const{data:i,error:h}=await I.from("products").select("*").eq("store_id",r.id).eq("in_stock",!0).order("name");if(h)throw h;p(i||[])}catch(r){console.error("Error fetching store data:",r),E(r.message||"Failed to load store data. Please try again.")}finally{d(!1)}},[]),ie=a.useCallback(async()=>{if(t!=null&&t.id)try{C(!0);const{data:s,error:r}=await I.from("store_hours").select("*").eq("store_id",t.id).order("day_of_week");if(r)throw r;const n=(s==null?void 0:s.map(i=>{var h,k;return{...i,opens_at:(h=i.opens_at)==null?void 0:h.slice(0,5),closes_at:(k=i.closes_at)==null?void 0:k.slice(0,5)}}))||[];we(n)}catch(s){console.error("Error fetching working hours:",s)}finally{C(!1)}},[t==null?void 0:t.id]);a.useEffect(()=>{l&&W(l)},[l,W]),a.useEffect(()=>{t!=null&&t.id&&(ie(),ne())},[t==null?void 0:t.id,ie,ne]);const U=a.useCallback(async s=>{await re({productId:s.id,storeId:s.store_id,name:s.name,price:s.price,quantity:1,image:s.image_url}),V({show:!0,message:"Added to Cart!"})},[re]),Pe=a.useCallback(s=>{ee(s),o&&(q(o),y(null))},[o]),Le=a.useCallback(()=>{ee(null),F&&(y(F),q(null))},[F]),le=a.useCallback(s=>{y(s)},[]),oe=a.useCallback(()=>{y(null),q(null)},[]),ce=a.useCallback(s=>{if(!o||!m.length)return;const r=m.findIndex(i=>i.id===o.id);let n;s==="next"?n=(r+1)%m.length:n=(r-1+m.length)%m.length,y(m[n])},[o,m]),Ie=a.useCallback(()=>{Ne(s=>!s)},[]),Ee=async()=>{const s={title:t==null?void 0:t.name,text:`Check out ${t==null?void 0:t.name} on Marketplace!`,url:window.location.href};try{navigator.share?await navigator.share(s):(await navigator.clipboard.writeText(window.location.href),V({show:!0,message:"Link copied to clipboard!"}))}catch(r){console.error("Error sharing:",r)}},de=u*$,ze=de-$,Q=m.slice(ze,de),f=Math.ceil(m.length/$),Te=a.useCallback(()=>{const r=[],n=Math.max(1,u-Math.floor(2.5)),i=Math.min(f,n+5-1);n>1&&(r.push(1),n>2&&r.push("..."));for(let h=n;h<=i;h++)r.push(h);return i<f&&(i<f-1&&r.push("..."),r.push(f)),r},[u,f]),B=a.useCallback(s=>{P(s),window.scrollTo({top:0,behavior:"smooth"})},[]),me=a.useMemo(()=>w.length>0?w:Array.from(new Set(c.map(s=>s.category))).map(s=>({id:s,name:s,is_active:!0})),[c,w]),Me=a.useCallback(()=>{G(""),X(""),J("name-asc"),P(1)},[]);return j?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-stone-100",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):Y||!t?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-stone-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-stone-900 mb-2",children:"Store Not Found"}),e.jsx("p",{className:"text-stone-600 mb-4",children:Y||"The store you're looking for doesn't exist or is currently inactive."}),e.jsx(g,{variant:"primary",onClick:()=>l&&W(l),children:"Retry"})]})}):e.jsxs("div",{className:"min-h-screen bg-theme-secondary text-theme-primary antialiased",children:[e.jsx(Xe,{onSearch:G,searchValue:z}),e.jsx(Ke,{targetPage:"store",storeId:t.id}),e.jsxs("section",{className:"relative bg-cover bg-center text-white h-64 md:h-80 flex items-center justify-center shadow-lg",style:{backgroundImage:`url(${t.banner_url||"https://omzqjvehfhjtfrphzuax.supabase.co/storage/v1/object/public/wallpaper//sl_020620_27800_34.jpg"})`},children:[e.jsx("div",{className:"absolute inset-0 bg-black/50"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center gap-6 md:gap-8 px-4 text-center md:text-left",children:[e.jsx("div",{className:"flex-shrink-0",children:t.logo_url?e.jsx("img",{src:t.logo_url,alt:t.name,className:"h-24 w-24 md:h-32 md:w-32 rounded-full object-cover border-4 border-white shadow-lg transition-transform duration-300 hover:scale-105",loading:"lazy"}):e.jsx("div",{className:"h-24 w-24 md:h-32 md:w-32 rounded-full bg-indigo-100 flex items-center justify-center border-4 border-white shadow-lg",children:e.jsx("span",{className:"text-4xl font-bold text-indigo-600",children:t.name.substring(0,2).toUpperCase()})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold drop-shadow-md",children:t.name}),t.is_verified&&e.jsx(De,{className:"h-8 w-8 text-green-500 bg-green-100 rounded-full p-1 hover:scale-110 transition-transform",title:"Verified Store"})]}),e.jsx("p",{className:"mt-2 text-lg text-stone-200 drop-shadow-sm",children:t.description}),e.jsxs("div",{className:"mt-4 flex flex-wrap justify-center md:justify-start gap-4",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${ue(_,t.time_zone)?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx(Fe,{className:"inline-block h-4 w-4 mr-1 -mt-0.5"}),ue(_,t.time_zone)?"Open Now":"Currently Closed"]}),e.jsxs("span",{className:"flex items-center text-stone-200 text-sm",children:[e.jsx(qe,{className:"h-4 w-4 mr-1"}),t.location]})]})]})]})]}),e.jsx("section",{className:"max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-theme-card rounded-xl shadow-md overflow-hidden",children:[e.jsxs("button",{onClick:Ie,className:"w-full flex justify-between items-center p-4 sm:p-5 text-left font-semibold text-lg text-theme-primary hover:bg-theme-tertiary transition-colors duration-300",children:[e.jsx("span",{children:"Store Information"}),e.jsx(Ve,{className:`h-5 w-5 transition-transform duration-300 ${te?"rotate-180":""}`})]}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${te?"max-h-screen opacity-100 p-4 sm:p-5":"max-h-0 opacity-0 p-0"}`,children:e.jsxs("div",{className:"border-t border-theme grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-theme-primary mb-2",children:"About Us"}),e.jsx("p",{className:"text-theme-secondary",children:t.description}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[t.phone_number&&e.jsxs("a",{href:`tel:${t.phone_number}`,className:"flex items-center text-sm text-indigo-600 hover:underline",children:[e.jsx(He,{className:"h-4 w-4 mr-1"}),t.phone_number]}),t.channel_link&&e.jsxs("a",{href:t.channel_link.startsWith("http")?t.channel_link:`https://${t.channel_link}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-sm text-indigo-600 hover:underline",children:[e.jsx(Oe,{className:"h-4 w-4 mr-1"}),"Channel"]}),e.jsxs("button",{onClick:Ee,className:"flex items-center text-sm text-indigo-600 hover:underline",children:[e.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6.632l6.632-3.316m0 0a3 3 0 110-2.684 3 3 0 010 2.684z"})}),"Share Store"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-theme-primary mb-2",children:"Working Hours"}),b?e.jsx("div",{className:"flex justify-center items-center h-20",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"})}):_.length===0?e.jsx("p",{className:"text-sm text-theme-secondary",children:"No working hours available"}):e.jsx("div",{className:"grid grid-cols-1 gap-1 text-sm",children:_.map(s=>{const r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][s.day_of_week],n=s.day_of_week===new Date(new Date().toLocaleString("en-US",{timeZone:t.time_zone})).getDay();return e.jsxs("div",{className:`flex justify-between ${n?"font-semibold text-indigo-700 bg-indigo-50 rounded-md p-2 -mx-2 dark:text-indigo-300 dark:bg-indigo-900/30":"text-theme-secondary"}`,children:[e.jsx("span",{children:r}),e.jsx("span",{children:s.is_closed?"Closed":`${fe(s.opens_at)} - ${fe(s.closes_at)}`})]},s.day_of_week)})})]})]})})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-theme-primary",children:"Our Products"}),e.jsx("p",{className:"mt-2 text-theme-secondary",children:"Browse our collection of products. Use the filters to find exactly what you're looking for."})]}),e.jsx("div",{className:`bg-theme-card/90 backdrop-blur-lg sticky top-16 z-30 mb-8 p-4 rounded-xl shadow-sm transition-all duration-300 ${Ce?"translate-y-0 opacity-100":"-translate-y-full opacity-0 pointer-events-none"}`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:[e.jsxs("select",{value:S,onChange:s=>{X(s.target.value),P(1)},className:"w-full sm:w-auto rounded-md border-theme bg-theme-input text-theme-primary py-2 pl-3 pr-10 text-base focus:outline-none focus:ring-indigo-600 focus:border-indigo-600",children:[e.jsx("option",{value:"",children:"All Categories"}),ve?e.jsx("option",{value:"",disabled:!0,children:"Loading categories..."}):me.length>0?me.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id)):Array.from(new Set(c.map(s=>s.category))).map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:M,onChange:s=>J(s.target.value),className:"w-full sm:w-auto rounded-md border-theme bg-theme-input text-theme-primary py-2 pl-3 pr-10 text-base focus:outline-none focus:ring-indigo-600 focus:border-indigo-600",children:[e.jsx("option",{value:"name-asc",children:"Sort by Name (A-Z)"}),e.jsx("option",{value:"name-desc",children:"Sort by Name (Z-A)"}),e.jsx("option",{value:"price-asc",children:"Sort by Price (Low-High)"}),e.jsx("option",{value:"price-desc",children:"Sort by Price (High-Low)"}),e.jsx("option",{value:"newest",children:"Sort by Newest"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{variant:A==="grid"?"primary":"secondary",onClick:()=>K("grid"),className:"p-2","aria-label":"Grid view",children:e.jsx(We,{className:"h-5 w-5"})}),e.jsx(g,{variant:A==="list"?"primary":"secondary",onClick:()=>K("list"),className:"p-2","aria-label":"List view",children:e.jsx(Ue,{className:"h-5 w-5"})})]})]})}),Q.length===0?e.jsxs("div",{className:"text-center py-16 bg-theme-card rounded-xl shadow-md",children:[e.jsxs("div",{className:"text-6xl mb-4",children:["🛒",e.jsx("span",{className:"text-red-500 relative -left-5 -top-2 text-7xl font-bold",children:"🚫"})]}),e.jsx("h3",{className:"text-2xl font-semibold text-theme-primary",children:"No Products Found"}),e.jsx("p",{className:"text-theme-secondary mt-2",children:"Try adjusting your search or filters to find what you're looking for."}),e.jsx(g,{variant:"link",onClick:Me,className:"mt-4 text-indigo-600 hover:text-indigo-800",children:"Clear all filters"})]}):A==="grid"?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:Q.map(s=>e.jsx(ss,{product:s,onAddToCart:U,onQuickView:le,isLoading:v,recentlyAdded:N,productCategories:w},s.id))}):e.jsx("div",{className:"space-y-4",children:Q.map(s=>{var r;return e.jsxs("div",{className:"bg-theme-card rounded-xl shadow-md overflow-hidden transition-all duration-300 hover:shadow-lg flex flex-col sm:flex-row dark:shadow-gray-900/20",children:[e.jsxs("div",{className:"sm:w-48 flex-shrink-0 relative h-48 sm:h-auto cursor-pointer group bg-theme-tertiary",onClick:()=>le(s),children:[s.image_url?e.jsx("img",{src:s.image_url,alt:s.name,className:"w-full h-full object-cover",loading:"lazy",decoding:"async"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-theme-tertiary",children:e.jsx(R,{className:"w-12 h-12 text-theme-tertiary"})}),e.jsx("span",{className:"absolute top-2 left-2 bg-black/70 text-white text-xs font-bold px-2 py-1 rounded-full backdrop-blur-sm",children:((r=w.find(n=>n.id===s.category))==null?void 0:r.name)||s.category})]}),e.jsxs("div",{className:"p-6 flex-1 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mt-1 text-lg leading-tight font-medium text-theme-primary",children:s.name}),e.jsx("p",{className:"mt-2 text-theme-secondary line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx(Z,{amount:s.price,className:"text-xl font-semibold"}),e.jsx("button",{onClick:()=>U(s),disabled:v&&N===s.id,className:"inline-flex items-center px-4 py-2 rounded-md font-medium bg-indigo-600 text-white hover:bg-indigo-700 transition-colors disabled:opacity-50",children:v&&N===s.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Add to Cart"]})})]})]})]},s.id)})}),f>1&&e.jsxs("nav",{className:"mt-12 flex justify-center items-center space-x-2","aria-label":"Pagination",children:[e.jsx(g,{variant:"secondary",onClick:()=>B(u-1),disabled:u===1,className:"px-4 py-2 text-sm font-medium rounded-md disabled:opacity-50",children:"Previous"}),Te().map((s,r)=>e.jsx(g,{variant:u===s?"primary":"secondary",onClick:()=>typeof s=="number"&&B(s),disabled:s==="...",className:`w-10 h-10 text-sm font-medium rounded-md ${s==="..."?"cursor-default":""}`,children:s},`${s}-${r}`)),e.jsx(g,{variant:"secondary",onClick:()=>B(u+1),disabled:u===f,className:"px-4 py-2 text-sm font-medium rounded-md disabled:opacity-50",children:"Next"})]}),L.show&&e.jsx("div",{className:"fixed bottom-4 right-4 z-50 bg-green-500 text-white px-4 py-2 rounded-md shadow-lg transition-all duration-300 transform translate-y-0",role:"alert",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),L.message]})})]}),e.jsx(Je,{isOpen:pe,onClose:()=>be(!1)}),D&&e.jsx(es,{imageUrl:D,isOpen:!!D,onClose:Le}),o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60",children:e.jsxs("div",{className:"relative w-full max-w-4xl max-h-[90vh] bg-white rounded-lg shadow-xl flex flex-col md:flex-row overflow-hidden animate-[slideInUp_0.4s_cubic-bezier(0.25,0.46,0.45,0.94)]",children:[e.jsx("button",{onClick:oe,className:"absolute top-3 right-3 z-20 bg-white/90 rounded-full p-2 text-stone-900 hover:bg-white transition-colors shadow-md","aria-label":"Close quick view",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"relative w-full md:w-1/2 h-64 md:h-auto bg-stone-100 flex items-center justify-center overflow-hidden",children:[e.jsx("button",{onClick:()=>ce("prev"),className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white/90 rounded-full p-2 text-stone-900 hover:bg-white transition-colors shadow-md disabled:opacity-50","aria-label":"Previous product",disabled:m.length<=1,children:e.jsx(Be,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-full h-full flex items-center justify-center cursor-pointer",onClick:()=>o.image_url&&Pe(o.image_url),children:o.image_url?e.jsx("img",{src:o.image_url,alt:o.name,className:"w-full h-full object-contain",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(R,{className:"w-16 h-16 text-stone-400"})})}),e.jsx("button",{onClick:()=>ce("next"),className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white/90 rounded-full p-2 text-stone-900 hover:bg-white transition-colors shadow-md disabled:opacity-50","aria-label":"Next product",disabled:m.length<=1,children:e.jsx(Re,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"w-full md:w-1/2 p-6 flex flex-col justify-between overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-semibold text-indigo-600 bg-indigo-50 px-2 py-1 rounded-full",children:((he=w.find(s=>s.id===o.category))==null?void 0:he.name)||o.category}),e.jsx("h2",{className:"text-2xl font-bold mt-3 text-stone-900 leading-tight",children:o.name}),e.jsx(Z,{amount:o.price,className:"text-3xl font-light text-stone-900 mt-4"}),e.jsx("p",{className:"text-stone-600 mt-4 text-sm leading-relaxed",children:o.description})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("button",{onClick:()=>U(o),disabled:v&&N===o.id,className:"w-full inline-flex items-center justify-center px-6 py-3 rounded-md font-medium bg-indigo-600 text-white hover:bg-indigo-700 transition-colors disabled:opacity-50",children:v&&N===o.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"h-5 w-5 mr-2"}),"Add to Cart"]})}),e.jsx("button",{onClick:oe,className:"w-full px-6 py-3 rounded-md font-medium border border-stone-300 text-stone-700 hover:bg-stone-50 transition-colors",children:"Continue Shopping"})]})]})]})})]})};export{ds as default};
