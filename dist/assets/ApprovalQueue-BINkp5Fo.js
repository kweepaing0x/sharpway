import{s as p,j as e,B as l,A as w,u as h,v as j,w as g,x as b,y as C,a7 as S}from"./ui-components-CL-10tNC.js";import{u as A,r}from"./react-vendor-NfsKhbMh.js";import"./supabase-DQ7Oc2S5.js";const k=()=>{const u=A(),[n,i]=r.useState([]),[y,N]=r.useState(!0),[c,d]=r.useState(null),[o,m]=r.useState(null);r.useEffect(()=>{v()},[]);const v=async()=>{try{const{data:s,error:a}=await p.from("stores").select("*").eq("approval_status","pending").order("created_at",{ascending:!1});if(a)throw a;i(s||[])}catch(s){console.error("Error fetching pending stores:",s),d(s.message)}finally{N(!1)}},x=async(s,a)=>{m(s);try{const{error:t}=await p.from("stores").update({approval_status:a,updated_at:new Date().toISOString()}).eq("id",s);if(t)throw t;i(n.filter(f=>f.id!==s))}catch(t){console.error("Error updating store status:",t),d(t.message)}finally{m(null)}};return e.jsxs("div",{className:"max-w-4xl mx-auto py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(l,{variant:"ghost",onClick:()=>u("/admin/stores"),className:"mb-4",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Back to Stores"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Store Approval Queue"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Review and approve pending store applications"})]}),c&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",children:c}),y?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-500",children:"Loading pending stores..."})]}):n.length===0?e.jsx(h,{children:e.jsx(j,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"All caught up!"}),e.jsx("p",{className:"mt-1 text-gray-500",children:"No pending store applications to review."})]})})}):e.jsx("div",{className:"space-y-6",children:n.map(s=>e.jsxs(h,{children:[e.jsx(b,{children:e.jsxs(C,{className:"flex items-center justify-between",children:[e.jsx("span",{children:s.name}),e.jsx("span",{className:"px-2 py-1 text-sm bg-yellow-100 text-yellow-800 rounded-full",children:"Pending Review"})]})}),e.jsxs(j,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Store Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-gray-900",children:s.description}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Category: ",e.jsx("span",{className:"font-medium",children:s.category})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Location: ",e.jsx("span",{className:"font-medium",children:s.location})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Payment Methods"}),e.jsx("div",{className:"space-y-1",children:Object.entries(s.payment_methods).map(([a,t])=>a!=="wallet_addresses"&&e.jsxs("p",{className:"text-sm text-gray-600",children:[a.toUpperCase(),":",e.jsx("span",{className:`ml-2 ${t?"text-green-600":"text-red-600"}`,children:t?"Enabled":"Disabled"})]},a))})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsxs(l,{variant:"secondary",onClick:()=>x(s.id,"rejected"),isLoading:o===s.id,className:"text-red-600 hover:text-red-700",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Reject"]}),e.jsxs(l,{variant:"primary",onClick:()=>x(s.id,"approved"),isLoading:o===s.id,children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Approve"]})]})]})]},s.id))})]})};export{k as default};
