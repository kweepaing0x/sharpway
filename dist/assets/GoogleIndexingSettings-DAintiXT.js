import{j as e,u as o,x as c,y as g,S as X,v as x,a3 as C,ae as G,af as y,ag as I,D,B as k,ah as A}from"./ui-components-CL-10tNC.js";import{r as t}from"./react-vendor-NfsKhbMh.js";import{u as E}from"./stores-BBDuH2RS.js";import"./supabase-DQ7Oc2S5.js";const B=()=>{const{settings:n,loading:_,error:m,fetchSettings:u,updateSettings:f}=E(),[s,i]=t.useState({enable_google_indexing:!0,indexed_pages:["home","store"],google_analytics_measurement_id:""}),[h,b]=t.useState(!1),[p,r]=t.useState(null);t.useEffect(()=>{u()},[u]),t.useEffect(()=>{n&&i({enable_google_indexing:n.enable_google_indexing||!0,indexed_pages:n.indexed_pages||["home","store"],google_analytics_measurement_id:n.google_analytics_measurement_id||""})},[n]);const N=()=>{i(a=>({...a,enable_google_indexing:!a.enable_google_indexing}))},j=a=>{i(l=>({...l,indexed_pages:l.indexed_pages.includes(a)?l.indexed_pages.filter(d=>d!==a):[...l.indexed_pages,a]}))},v=a=>{const{name:l,value:d}=a.target;i(S=>({...S,[l]:d}))},w=async a=>{a.preventDefault(),b(!0),r(null);try{await f({enable_google_indexing:s.enable_google_indexing,indexed_pages:s.indexed_pages,google_analytics_measurement_id:s.google_analytics_measurement_id.trim()||null}),r("Settings updated successfully!"),setTimeout(()=>r(null),3e3)}catch(l){console.error("Error updating settings:",l)}finally{b(!1)}};return _?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Google Indexing & Analytics"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Control how Google indexes your site and configure Google Analytics tracking."})]}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",children:m}),p&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded relative",children:p}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs(o,{children:[e.jsx(c,{children:e.jsxs(g,{className:"flex items-center",children:[e.jsx(X,{className:"h-5 w-5 mr-2"}),"Google Indexing Control"]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${s.enable_google_indexing?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:s.enable_google_indexing?e.jsx(C,{className:"h-5 w-5"}):e.jsx(G,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.enable_google_indexing?"Indexing Enabled":"Indexing Disabled"}),e.jsx("p",{className:"text-sm text-gray-500",children:s.enable_google_indexing?"Your site can be indexed by Google search engines":"Your site will not be indexed by Google search engines"})]})]}),e.jsx("button",{type:"button",onClick:N,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${s.enable_google_indexing?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${s.enable_google_indexing?"translate-x-5":"translate-x-0"}`})})]}),s.enable_google_indexing&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Select Pages to Index"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:s.indexed_pages.includes("home"),onChange:()=>j("home"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Home Page"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:s.indexed_pages.includes("store"),onChange:()=>j("store"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Store Pages"})]})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:'Selected pages will be allowed to be indexed by Google. Unselected pages will have "noindex" meta tags.'})]})]})]}),e.jsxs(o,{children:[e.jsx(c,{children:e.jsxs(g,{className:"flex items-center",children:[e.jsx(I,{className:"h-5 w-5 mr-2"}),"Google Analytics"]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsx(D,{label:"Google Analytics Measurement ID",name:"google_analytics_measurement_id",type:"text",value:s.google_analytics_measurement_id,onChange:v,placeholder:"G-XXXXXXXXXX",fullWidth:!0,helperText:"Enter your Google Analytics 4 Measurement ID (e.g., G-XXXXXXXXXX)"}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How to find your Measurement ID:"}),e.jsxs("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[e.jsx("li",{children:"Go to Google Analytics (analytics.google.com)"}),e.jsx("li",{children:"Select your property"}),e.jsx("li",{children:'Click "Admin" in the bottom left'}),e.jsx("li",{children:'Under "Property", click "Data Streams"'}),e.jsx("li",{children:"Click on your web stream"}),e.jsx("li",{children:'Copy the "Measurement ID" (starts with G-)'})]})]}),s.google_analytics_measurement_id&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-green-800",children:["âœ“ Google Analytics will be enabled with ID: ",e.jsx("code",{className:"font-mono bg-green-100 px-1 rounded",children:s.google_analytics_measurement_id})]})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(k,{type:"submit",variant:"primary",disabled:h,className:"flex items-center space-x-2",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:h?"Saving...":"Save Settings"})]})})]}),n&&e.jsxs(o,{children:[e.jsx(c,{children:e.jsx(g,{children:"Current Configuration"})}),e.jsx(x,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Indexing Status:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${n.enable_google_indexing?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.enable_google_indexing?"Enabled":"Disabled"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Indexed Pages:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:(n.indexed_pages||[]).length>0?(n.indexed_pages||[]).join(", "):"None"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Analytics:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:n.google_analytics_measurement_id?"Configured":"Not configured"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Last Updated:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:new Date(n.updated_at).toLocaleDateString()})]})]})})]})]})};export{B as default};
